[ 2017-09-03T10:56:00+08:00 ] 127.0.0.1 /index.php/Home/article/artlist
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.075005s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.010001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.011001s ]
ERR: 模板不存在:./Home/View/Article/artlist.html

[ 2017-09-03T10:56:38+08:00 ] 127.0.0.1 /index.php/Home/article/artlist
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
ERR: 模板不存在:./Home/View/Article/artlist.html

[ 2017-09-03T10:56:40+08:00 ] 127.0.0.1 /index.php/Home/article/artlist
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
ERR: 模板不存在:./Home/View/Article/artlist.html

[ 2017-09-03T10:56:40+08:00 ] 127.0.0.1 /index.php/Home/article/artlist
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
ERR: 模板不存在:./Home/View/Article/artlist.html

[ 2017-09-03T10:56:41+08:00 ] 127.0.0.1 /index.php/Home/article/artlist
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
ERR: 模板不存在:./Home/View/Article/artlist.html

[ 2017-09-03T10:56:41+08:00 ] 127.0.0.1 /index.php/Home/article/artlist
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
ERR: 模板不存在:./Home/View/Article/artlist.html

[ 2017-09-03T10:57:35+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.4820s ]
SQL: SELECT * FROM `article`  [ RunTime:0.1220s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0660s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0160s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0050s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0070s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.014001s ]
INFO: [ template_filter ] --END-- [ RunTime:0.014001s ]

[ 2017-09-03T10:58:27+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:00:23+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:00:23+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:00:23+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:00:24+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:00:24+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.002000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:00:24+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.001000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:02:38+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.001000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:02:39+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001001s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:02:39+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:02:39+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:02:39+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:02:40+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.

[ 2017-09-03T11:04:27+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.1090s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0740s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T11:14:49+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 86 行.
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 90 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.140008s ]
INFO: [ view_filter ] --END-- [ RunTime:0.140008s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.083004s ]
INFO: [ app_end ] --END-- [ RunTime:0.084004s ]

[ 2017-09-03T11:22:01+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T11:22:36+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 88 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010000s ]
INFO: [ view_parse ] --END-- [ RunTime:0.010000s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001001s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T11:22:36+08:00 ] 127.0.0.1 /index.php/Home/article/__IMG__
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.004000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
ERR: 非法操作:__IMG__

[ 2017-09-03T11:23:26+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.014001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.014001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T11:23:27+08:00 ] 127.0.0.1 /index.php/Home/article/__IMG__
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
ERR: 非法操作:__IMG__

[ 2017-09-03T11:25:08+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.011001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.011001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T11:25:08+08:00 ] 127.0.0.1 /index.php/Home/article/__IMG__
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
ERR: 非法操作:__IMG__

[ 2017-09-03T11:31:34+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.010001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T11:31:34+08:00 ] 127.0.0.1 /index.php/Home/article/__IMG__
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
ERR: 非法操作:__IMG__

[ 2017-09-03T11:35:41+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.011001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T11:35:41+08:00 ] 127.0.0.1 /index.php/Home/article/__IMG__
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.021002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.022002s ]
ERR: 非法操作:__IMG__

[ 2017-09-03T11:35:43+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Undefined variable: art D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.010001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T11:35:43+08:00 ] 127.0.0.1 /index.php/Home/article/__IMG__
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
ERR: 非法操作:__IMG__

[ 2017-09-03T11:46:09+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.015001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T11:46:54+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.014001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T11:47:23+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T11:47:45+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.012001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T11:49:15+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001001s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.015001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.015001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T11:50:54+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.014000s ]
INFO: [ view_parse ] --END-- [ RunTime:0.014000s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:24:05+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.015001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:29:33+08:00 ] 127.0.0.1 /index.php/Home/article/article
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.013001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.013001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.015001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.015001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:32:55+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.2590s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0010s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T14:34:22+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:34:31+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:34:32+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T14:35:31+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.024002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:35:31+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T14:35:32+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T14:37:12+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/2.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=2 ) LIMIT 1   [ RunTime:0.0850s ]
SQL: SELECT * FROM `article` WHERE ( cid=2 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0130s ]
NOTIC: [8] Undefined index: new_time D:\WAMP\wamp\www\test\bogle\Home\Controller\CateController.class.php 第 23 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.001000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 80 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 86 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.022001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.022001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:37:20+08:00 ] 127.0.0.1 /index.php/Home/Article/article.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.014000s ]
INFO: [ view_parse ] --END-- [ RunTime:0.015000s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001001s ]

[ 2017-09-03T14:37:27+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.001000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.022001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.022001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.003000s ]

[ 2017-09-03T14:37:27+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:37:27+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:37:30+08:00 ] 127.0.0.1 /index.php/Home/About/about.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.054003s ]
INFO: [ view_parse ] --END-- [ RunTime:0.054003s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:37:31+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.022001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.022001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:37:31+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:37:31+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:37:37+08:00 ] 127.0.0.1 /index.php/Home/Message/message.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.121007s ]
INFO: [ view_parse ] --END-- [ RunTime:0.121007s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001001s ]

[ 2017-09-03T14:37:40+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.022001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.022001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:37:40+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:37:40+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:38:54+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/2.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=2 ) LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` WHERE ( cid=2 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0000s ]
NOTIC: [8] Undefined index: new_time D:\WAMP\wamp\www\test\bogle\Home\Controller\CateController.class.php 第 23 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 80 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 86 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:39:08+08:00 ] 127.0.0.1 /index.php/Home/About/about.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001001s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010000s ]
INFO: [ view_parse ] --END-- [ RunTime:0.010000s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:39:13+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.001000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.022001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.022001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:39:13+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:39:13+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:42:21+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:42:21+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:42:21+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T14:42:51+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.015001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.015001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:43:02+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.022002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.022002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:43:02+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T14:43:02+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.006000s ]

[ 2017-09-03T14:44:41+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.

[ 2017-09-03T14:45:02+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.

[ 2017-09-03T14:46:43+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.

[ 2017-09-03T14:46:44+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0770s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.

[ 2017-09-03T14:46:45+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.

[ 2017-09-03T14:46:45+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.

[ 2017-09-03T14:46:46+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.

[ 2017-09-03T14:46:46+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.

[ 2017-09-03T14:47:11+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0040s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 14 行.

[ 2017-09-03T14:47:20+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001001s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]

[ 2017-09-03T14:47:41+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]

[ 2017-09-03T14:48:04+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.

[ 2017-09-03T14:48:07+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.

[ 2017-09-03T14:48:07+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.

[ 2017-09-03T14:48:10+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.

[ 2017-09-03T14:48:11+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined offset: 0 D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.

[ 2017-09-03T14:50:14+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:50:58+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:54:34+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T14:54:34+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:54:34+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:54:35+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:55:23+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:56:39+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:56:40+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:56:40+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:56:40+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:56:40+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:56:46+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T14:59:44+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]

[ 2017-09-03T15:00:42+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
NOTIC: [8] Undefined variable: atrinfo D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined variable: atrinfo D:\WAMP\wamp\www\test\bogle\Home\Controller\IndexController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]

[ 2017-09-03T15:01:53+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0020s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0010s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:01:53+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:01:54+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:03:24+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001001s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.024002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:03:24+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:03:24+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T15:03:25+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.025001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.025001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:03:25+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:03:25+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:03:26+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.024001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:03:26+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:03:26+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:03:45+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 79 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 125 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.024002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:03:45+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:03:45+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T15:05:00+08:00 ] 127.0.0.1 /index.php/Home/index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.001000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.024001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:05:00+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:05:00+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:05:20+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined variable: artinfo D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.022001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.022001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001001s ]
INFO: [ app_end ] --END-- [ RunTime:0.001001s ]

[ 2017-09-03T15:06:30+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.023001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:06:30+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:06:30+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.010000s ]

[ 2017-09-03T15:06:33+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='1',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.5700s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013000s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013000s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T15:06:33+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T15:06:56+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/newslistpic.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 0 LIMIT 1   [ RunTime:0.0010s ]
ERR: 1054:Unknown column 'newslistpic' in 'where clause'
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id=newslistpic )
ERR: 1054:Unknown column 'newslistpic' in 'where clause'
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id=newslistpic )

[ 2017-09-03T15:07:05+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0010s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='1',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.0810s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.015001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.015001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:07:05+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T15:07:11+08:00 ] 127.0.0.1 /index.php/Home/About/about.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010000s ]
INFO: [ view_parse ] --END-- [ RunTime:0.010000s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001001s ]
INFO: [ app_end ] --END-- [ RunTime:0.001001s ]

[ 2017-09-03T15:07:21+08:00 ] 127.0.0.1 /index.php/Home/Message/message.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.010001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:07:28+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.022001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.022001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:07:28+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:07:28+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:07:34+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/2.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=2 ) LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` WHERE ( cid=2 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0010s ]
NOTIC: [8] Undefined index: new_time D:\WAMP\wamp\www\test\bogle\Home\Controller\CateController.class.php 第 23 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 80 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 86 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012000s ]
INFO: [ view_parse ] --END-- [ RunTime:0.012000s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:07:38+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.023002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:07:38+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:07:38+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:07:44+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0020s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='2',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.1130s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 83 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.014001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.014001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:07:44+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T15:08:15+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0010s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.022002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.022002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:08:15+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:08:15+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:08:22+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/2.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=2 ) LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` WHERE ( cid=2 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0010s ]
NOTIC: [8] Undefined index: new_time D:\WAMP\wamp\www\test\bogle\Home\Controller\CateController.class.php 第 23 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 80 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 86 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012000s ]
INFO: [ view_parse ] --END-- [ RunTime:0.012000s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:08:24+08:00 ] 127.0.0.1 /index.php/Home/Article/article.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0050s ]
SQL: SELECT * FROM `article` WHERE `id` = 0 LIMIT 1   [ RunTime:0.0050s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id= )
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id= )

[ 2017-09-03T15:11:29+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.023001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:11:29+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T15:11:29+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:13:45+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0010s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.023001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001001s ]
INFO: [ app_end ] --END-- [ RunTime:0.001001s ]

[ 2017-09-03T15:13:45+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:13:45+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:13:55+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0040s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.024001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:13:56+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T15:13:56+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:14:08+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='2',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.1190s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.018001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:14:08+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:17:38+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='3',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.0790s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:17:38+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:18:37+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='4',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.0740s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:18:37+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:19:18+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='5',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.0840s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:19:18+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:19:41+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='6',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.0790s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:19:41+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:19:42+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='7',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.0690s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:19:42+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:21:52+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='8',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.1220s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:21:52+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:22:21+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='9',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.0810s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:23:07+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0050s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='10',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.0750s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mnane - assumed 'mnane' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Undefined index: mnane D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:23:22+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='11',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.0710s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:23:50+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='12',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.0790s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.015001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.015001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:24:11+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.001000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.023001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:24:11+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:24:11+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:24:18+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='3',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0980s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.018001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.018001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T15:25:03+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='4',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0740s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:25:24+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='5',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0830s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:29:40+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0050s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0040s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0020s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='6',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0800s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 80 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 82 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:31:03+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='7',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0860s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:33:21+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='8',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0860s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.018001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.018001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:33:26+08:00 ] 127.0.0.1 /index.php/Home/Cate/catelist/id/2.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=2 ) LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT * FROM `article` WHERE ( cid=2 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0010s ]
NOTIC: [8] Undefined index: new_time D:\WAMP\wamp\www\test\bogle\Home\Controller\CateController.class.php 第 23 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 80 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 86 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012000s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:33:35+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/2.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=2 ) LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` WHERE ( cid=2 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0000s ]
NOTIC: [8] Undefined index: new_time D:\WAMP\wamp\www\test\bogle\Home\Controller\CateController.class.php 第 23 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 80 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 86 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.012001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:33:38+08:00 ] 127.0.0.1 /index.php/Home/Article/article.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 0 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
NOTIC: [8] Undefined index: cid D:\WAMP\wamp\www\test\bogle\Home\Controller\ArticleController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined index: content D:\WAMP\wamp\www\test\bogle\Home\Controller\ArticleController.class.php 第 14 行.
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id= )
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id= )

[ 2017-09-03T15:33:44+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0010s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001001s ]
INFO: [ app_end ] --END-- [ RunTime:0.002001s ]

[ 2017-09-03T15:33:44+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:33:44+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:33:46+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.001001s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001001s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.022001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.023001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:33:46+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001001s ]

[ 2017-09-03T15:33:46+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:33:49+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='9',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0980s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:34:50+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='10',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0850s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.018001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:35:08+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='11',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0770s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:37:36+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='12',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.1750s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T15:37:51+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='13',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0880s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:37:54+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='14',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0820s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:38:04+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='15',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0600s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.022001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.022001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.004000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.004000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.005000s ]
INFO: [ app_end ] --END-- [ RunTime:0.005000s ]

[ 2017-09-03T15:38:25+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='16',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0740s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.018001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.019001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:38:53+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='17',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0560s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.018001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.018001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:38:54+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='18',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0790s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:39:00+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='19',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.1370s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001001s ]

[ 2017-09-03T15:39:06+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0040s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='20',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0920s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.018001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.018001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T15:40:04+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.023001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:40:04+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:40:04+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:40:56+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0040s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='21',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0820s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.001000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.020001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.020001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:51:59+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='22',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0750s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.018001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.018001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:52:20+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='23',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0800s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017000s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017000s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001001s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T15:52:34+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='24',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0850s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001001s ]
INFO: [ app_end ] --END-- [ RunTime:0.002001s ]

[ 2017-09-03T15:53:22+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/2.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=2 ) LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT * FROM `article` WHERE ( cid=2 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0010s ]
NOTIC: [8] Undefined index: new_time D:\WAMP\wamp\www\test\bogle\Home\Controller\CateController.class.php 第 23 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 78 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 80 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 86 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T15:53:25+08:00 ] 127.0.0.1 /index.php/Home/Article/article.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 0 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
NOTIC: [8] Undefined index: cid D:\WAMP\wamp\www\test\bogle\Home\Controller\ArticleController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined index: content D:\WAMP\wamp\www\test\bogle\Home\Controller\ArticleController.class.php 第 14 行.
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id= )
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id= )

[ 2017-09-03T15:54:51+08:00 ] 127.0.0.1 /index.php/Home/Article/article.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 0 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
NOTIC: [8] Undefined index: cid D:\WAMP\wamp\www\test\bogle\Home\Controller\ArticleController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined index: content D:\WAMP\wamp\www\test\bogle\Home\Controller\ArticleController.class.php 第 14 行.
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id= )
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id= )

[ 2017-09-03T15:58:27+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/2.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=2 ) LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` WHERE ( cid=2 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0010s ]
NOTIC: [8] Undefined index: new_time D:\WAMP\wamp\www\test\bogle\Home\Controller\CateController.class.php 第 24 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 78 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 79 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:06:08+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.025002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.025002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.002000s ]
INFO: [ app_end ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T16:06:08+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:06:08+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:06:12+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/2.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0340s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=2 ) LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT * FROM `article` WHERE ( cid=2 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0010s ]
NOTIC: [8] Undefined index: new_time D:\WAMP\wamp\www\test\bogle\Home\Controller\CateController.class.php 第 24 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 72 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 78 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 79 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:06:17+08:00 ] 127.0.0.1 /index.php/Home/Article/article.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 0 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
NOTIC: [8] Undefined index: cid D:\WAMP\wamp\www\test\bogle\Home\Controller\ArticleController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined index: content D:\WAMP\wamp\www\test\bogle\Home\Controller\ArticleController.class.php 第 14 行.
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id= )
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id= )

[ 2017-09-03T16:06:54+08:00 ] 127.0.0.1 /index.php/Home/Article/article.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 0 LIMIT 1   [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
NOTIC: [8] Undefined index: cid D:\WAMP\wamp\www\test\bogle\Home\Controller\ArticleController.class.php 第 13 行.
SQL: SELECT `mname` FROM `cate` LIMIT 1   [ RunTime:0.0000s ]
NOTIC: [8] Undefined index: content D:\WAMP\wamp\www\test\bogle\Home\Controller\ArticleController.class.php 第 14 行.
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id= )
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
 [ SQL语句 ] : UPDATE `article` SET `check_count`='1' WHERE ( id= )

[ 2017-09-03T16:06:56+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/2.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001001s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=2 ) LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT * FROM `article` WHERE ( cid=2 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0000s ]
NOTIC: [8] Undefined index: new_time D:\WAMP\wamp\www\test\bogle\Home\Controller\CateController.class.php 第 24 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 72 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 72 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 78 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 79 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:06:58+08:00 ] 127.0.0.1 /index.php/Home/Article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001001s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='25',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0850s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:15:24+08:00 ] 127.0.0.1 /index.php/Home/Article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='26',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0860s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:15:30+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/3.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=3 ) LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` WHERE ( cid=3 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0010s ]
NOTIC: [8] Undefined index: new_time D:\WAMP\wamp\www\test\bogle\Home\Controller\CateController.class.php 第 24 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 72 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 72 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 78 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 79 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.018001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.018001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:16:41+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/3.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=3 ) LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` WHERE ( cid=3 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0000s ]
NOTIC: [8] Undefined index: new_time D:\WAMP\wamp\www\test\bogle\Home\Controller\CateController.class.php 第 24 行.

[ 2017-09-03T16:17:17+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/3.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0040s ]
SQL: SELECT * FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=3 ) LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` WHERE ( cid=3 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 72 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 72 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 78 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 79 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.018001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.018001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:17:20+08:00 ] 127.0.0.1 /index.php/Home/Article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='13',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.2140s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.020002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.020002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:17:22+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.029002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.029002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.002000s ]
INFO: [ app_end ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T16:17:22+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:17:22+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T16:17:28+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/5.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` WHERE `id` = 5 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=5 ) LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` WHERE ( cid=5 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0010s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 72 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 72 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:17:35+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist/id/5.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` WHERE `id` = 5 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid=5 ) LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` WHERE ( cid=5 ) ORDER BY new_time LIMIT 0,6   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 72 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 72 行.
NOTIC: [8] Undefined variable: show D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\e45d9fbab3f0631edff1bbce1fc5e050.php 第 85 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.018001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:17:42+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.023001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001001s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T16:17:42+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:17:42+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:17:47+08:00 ] 127.0.0.1 /index.php/Home/Message/message.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.011001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T16:17:50+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0010s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.024002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:17:50+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T16:17:50+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:27:13+08:00 ] 127.0.0.1 /index.php/Home/About/about.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.011001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:27:16+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0040s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.024001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:27:16+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:27:16+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:27:20+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0020s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0010s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.039002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.039002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.002000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T16:27:20+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T16:27:20+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T16:27:21+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0010s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.023002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:27:21+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:27:21+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:43:38+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.024001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.025001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:43:38+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:43:38+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T16:44:20+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.025002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.025002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:44:20+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:44:20+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:44:21+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:44:21+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:44:21+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:44:22+08:00 ] 127.0.0.1 /index.php/Home/Message/message.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.001000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.011001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:44:55+08:00 ] 127.0.0.1 /index.php/Home/Message/message.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010000s ]
INFO: [ view_parse ] --END-- [ RunTime:0.011000s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:44:57+08:00 ] 127.0.0.1 /index.php/Home/Message/message.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.010001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:44:59+08:00 ] 127.0.0.1 /index.php/Home/cate/catelist.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0020s ]
SQL: SELECT * FROM `cate` WHERE `id` = 0 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') LIMIT 1' at line 1
 [ SQL语句 ] : SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid= ) LIMIT 1  
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') LIMIT 1' at line 1
 [ SQL语句 ] : SELECT COUNT(*) AS tp_count FROM `article` WHERE ( cid= ) LIMIT 1  

[ 2017-09-03T16:49:30+08:00 ] 127.0.0.1 /index.php/Home/Message/message.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.016001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.016001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:49:32+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc like '%%' )' at line 1
 [ SQL语句 ] : SELECT * FROM `article` WHERE ( desc like '%%' ) 
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc like '%%' )' at line 1
 [ SQL语句 ] : SELECT * FROM `article` WHERE ( desc like '%%' ) 

[ 2017-09-03T16:50:01+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001001s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc like '%%' )' at line 1
 [ SQL语句 ] : SELECT * FROM `article` WHERE ( desc like '%%' ) 
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc like '%%' )' at line 1
 [ SQL语句 ] : SELECT * FROM `article` WHERE ( desc like '%%' ) 

[ 2017-09-03T16:50:06+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.003000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc like '%%' )' at line 1
 [ SQL语句 ] : SELECT * FROM `article` WHERE ( desc like '%%' ) 
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc like '%%' )' at line 1
 [ SQL语句 ] : SELECT * FROM `article` WHERE ( desc like '%%' ) 

[ 2017-09-03T16:50:27+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0040s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]

[ 2017-09-03T16:52:08+08:00 ] 127.0.0.1 /index.php/Home/Message/message.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\54955638e8a984f63383c333cbcde854.php 第 50 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.015001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.015001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T16:52:11+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0040s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]

[ 2017-09-03T16:52:25+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0060s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc like '%as%' )' at line 1
 [ SQL语句 ] : SELECT * FROM `article` WHERE ( desc like '%as%' ) 
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc like '%as%' )' at line 1
 [ SQL语句 ] : SELECT * FROM `article` WHERE ( desc like '%as%' ) 

[ 2017-09-03T16:53:31+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0400s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc like '%as%' )' at line 1
 [ SQL语句 ] : SELECT * FROM `article` WHERE ( desc like '%as%' ) 
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc like '%as%' )' at line 1
 [ SQL语句 ] : SELECT * FROM `article` WHERE ( desc like '%as%' ) 

[ 2017-09-03T16:55:50+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT * FROM `article` WHERE ( `desc` like '%as%' )  [ RunTime:0.0370s ]

[ 2017-09-03T16:56:01+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT * FROM `article` WHERE ( `desc` like '%as%' )  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0010s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.025001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.025001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001001s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:56:01+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T16:56:14+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0040s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.002000s ]

[ 2017-09-03T16:56:14+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:56:14+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:56:19+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.001000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0000s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0010s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.023002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:56:19+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T16:56:19+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T16:56:26+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/15.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 15 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='15',`title`='asdfdg',`image`='__PUBLIC__/Uploads/2017-08-31/59a81520edb68.jpg',`thumb_image`='./Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg',`desc`='asd',`content`='&lt;p&gt;asd&lt;/p&gt;',`new_time`='1504187681',`keyword`='asdasd',`hot_state`='0',`check_count`='14',`cid`='3',`admin_name`='asd' WHERE ( id=15 ) [ RunTime:0.0870s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.018001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.019001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000000s ]
INFO: [ app_end ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T20:24:10+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0040s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0390s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.034002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.034002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.003000s ]
INFO: [ app_end ] --END-- [ RunTime:0.004000s ]

[ 2017-09-03T20:24:10+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]

[ 2017-09-03T20:24:10+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T20:24:44+08:00 ] 127.0.0.1 /index.php/Home/index/index.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article`  [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate` LIMIT 5   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 3 LIMIT 1   [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: SELECT * FROM `article` ORDER BY check_count desc LIMIT 12   [ RunTime:0.0000s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 49 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 72 行.
NOTIC: [8] Use of undefined constant thumb_image - assumed 'thumb_image' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 73 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 75 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 76 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant check_count - assumed 'check_count' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 78 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\2f412aae274b751dca883838bf7e7502.php 第 123 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.024002s ]
INFO: [ view_parse ] --END-- [ RunTime:0.024002s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T20:24:44+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-08-31/thumb/59a81520edb68.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.003000s ]

[ 2017-09-03T20:24:44+08:00 ] 127.0.0.1 /index.php/Home/index/Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T20:24:48+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.001000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0000s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0000s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='27',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0800s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.001000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.001000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.018001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001000s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.001000s ]
INFO: [ app_end ] --END-- [ RunTime:0.001000s ]

[ 2017-09-03T20:25:32+08:00 ] 127.0.0.1 /index.php/Home/article/article/id/16.html
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000000s ]
INFO: [ app_init ] --END-- [ RunTime:0.000000s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000000s ]
SQL: SHOW COLUMNS FROM `article` [ RunTime:0.0030s ]
SQL: SELECT * FROM `article` WHERE `id` = 16 LIMIT 1   [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `cate` [ RunTime:0.0030s ]
SQL: SELECT * FROM `cate`  [ RunTime:0.0010s ]
SQL: SELECT `mname` FROM `cate` WHERE `id` = 2 LIMIT 1   [ RunTime:0.0010s ]
SQL: UPDATE `article` SET `id`='16',`title`='使用缓存实现后台的即时消息接收',`image`='./Public/Uploads/2017-09-02/59aaac452e61f.jpg',`thumb_image`='./Public/Uploads/2017-09-02/thumb/59aaac452e61f.jpg',`desc`='缓存实现后台的即时消息接收，QinBlog的后台即时消息接收的实现方法介绍。',`content`='&lt;table&gt;&lt;tbody&gt;&lt;tr class=&quot;firstRow&quot;&gt;&lt;td class=&quot;line-content&quot;&gt;## 导言&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;171&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;172&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;作为后台管理系统，每当前台有人进行操作(留言、评论、点赞)时，能收到即时的消息提醒是备受期待的事情。或者当你登陆后台时，能显示在你离线时什么时候、发生了什么事件也是很友好的功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;173&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;我的博客QinBlog就做了一个简单的消息提醒功能，那么分享一下思路和实现方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;174&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;175&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 项目环境&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;176&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Codeigniter，UIKIT，QinBlog&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;177&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;178&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 思路&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;179&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;180&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 首先，我们要做什么？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;181&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;182&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 一个消息提醒功能。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;183&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;184&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 实现什么功能？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;185&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;186&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 即时提醒，未登录时能保存消息待登陆后提醒。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;187&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;188&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 技术的选用？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;189&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;190&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 页面每次访问是HTTP请求，HTTP请求无状态，如何达到即时？长连接、socket？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;191&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;192&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 比起ajax轮询，socket更适合多连接的情况，而且实现相对较难(其实是我太菜:joy:)，对于本例的消息提醒来说可能杀鸡用牛刀。所以这里选择ajax轮询的方案来查看有无消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;193&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;194&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 用什么数据结构存储消息？怎么保存消息？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;195&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;196&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 那我们先想象一下前后台的状况。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;197&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台：用户的操作是不确定的，可能很长时间没有操作，也可能有短时间的高并发数据。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;198&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台：读取消息时按照时间先后取一一读取，直到读完。且后台不一定一直在线，每次登陆需要读取离线时产生的消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;199&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;200&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;那么明显的可以看到：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;201&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 产生消息和读取消息遵循FIFO(先进先出)，所以选择队列进行消息存储&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;202&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 离线时的消息需要临时保存(设置合理过期时间)，那么可以选择缓存、nosql等进行暂存。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;203&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;204&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;Q : 队列如何实现呢？&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;205&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;206&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;A : 用过redis的童鞋肯定知道redis有一个好用的list类型，可以很好的实现队列，当然相对于个人博客而言，只因为一个list就取租一台redis服务器实在不是什么高招。于是选择缓存(memcache或者文件缓存)。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;207&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;208&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;使用缓存的话，缓存只支持K=&amp;amp;gt;V形式的存储，那么队列需要我们自己实现。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;209&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;210&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;好在PHP本身就有array_pop，array_push等可以实现堆栈、队列等数据类型的函数，于是我们使用数组和相关函数来实现队列。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;211&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;212&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 方案图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;213&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;OK，经过一系列的思考，我们将这样实现消息提醒功能：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;214&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;215&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用队列保存消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;216&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 队列用数组实现&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;217&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 使用缓存保存队列数据&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;218&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 前台每次操作将消息添加到队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;219&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 后台登陆后进行轮询，每n秒读取一次队列，如果有消息，一条一条读取直到读完&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;220&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;221&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;如下图&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;222&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;![](http://www.qinblog.net/Public/Upload/2017-03-11/4f7d379474a5e55180a4b8324db293db.png)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;223&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;224&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;## 编码实现(详细请查看QinBlog的代码。)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;225&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;226&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 消息类库&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;227&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;有了思路，那么开始编码。消息队列的实现和缓存的使用我在QinBlog中写成了CI的扩展库。位置：application/common/libraries/Notice.php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;228&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;229&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;这个库实现了：&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;230&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 初始化缓存(使用CI的缓存驱动器)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;231&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 添加一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;232&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;- 读取一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;233&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;234&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;235&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&amp;amp;lt;?php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;236&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;237&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;defined(&amp;#39;BASEPATH&amp;#39;) OR exit(&amp;#39;No direct script access allowed&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;238&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;239&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;class Notice {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;240&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;241&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;private $_CI;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;242&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;243&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function __construct()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;244&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;245&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 获得超级对象&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;246&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI =&amp;amp;amp; get_instance();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;247&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 加载缓存驱动&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;248&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;249&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;load-&amp;amp;gt;driver(&amp;#39;cache&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;250&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;251&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;252&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;253&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* set_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;254&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;255&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 添加一条消息到消息队列&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;256&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;257&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;258&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function set_notice($msg) {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;259&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;260&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 如果没有初始化变量&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;261&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$nt = array();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;262&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;263&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;264&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;array_unshift($nt, date(&amp;#39;Y:m:d H:i:s&amp;#39;, time()).&amp;#39;&amp;amp;lt;br&amp;amp;gt;&amp;#39;.$msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;265&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 保存或更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;266&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;267&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;268&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;269&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;/**&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;270&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* get_notice&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;271&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;272&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;* 从消息队列获得一条消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;273&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;274&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;*/&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;275&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;276&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;277&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if( ! $nt = $this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;get(&amp;#39;nt&amp;#39;)){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;278&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return FALSE;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;279&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;280&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;281&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$msg = array_pop($nt);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;282&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 更新缓存&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;283&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;_CI-&amp;amp;gt;cache-&amp;amp;gt;file-&amp;amp;gt;save(&amp;#39;nt&amp;#39;, $nt, 86400 * 7);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;284&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;return $msg;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;285&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;286&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;287&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;288&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;289&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 添加消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;290&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;291&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在前端操作时写入消息即可。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;292&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;293&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;notice-&amp;amp;gt;set_notice($msg);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;294&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;295&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;### 读取消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;296&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;application/admin/controller/Manage.php中创建读取的方法。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;297&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;298&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```php&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;299&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;public function get_notice() {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;300&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$this-&amp;amp;gt;load-&amp;amp;gt;library(&amp;#39;notice&amp;#39;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;301&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;echo $this-&amp;amp;gt;notice-&amp;amp;gt;get_notice();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;302&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;303&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;304&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;305&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;在后台页面编写AJAX轮询脚本，1s请求一次，这里使用jquery的get函数来进行定时发起请求，使用UIKIT的notify组件来显示消息。&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;306&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;307&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;```javascript&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;308&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;// 从消息队列获取新消息&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;309&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;window.setInterval(function(){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;310&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;$.get(&amp;#39;&amp;amp;quot;.site_url(&amp;#39;Manage/get_notice&amp;#39;).&amp;amp;quot;&amp;#39;, function(result){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;311&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;if(result != &amp;#39;&amp;#39;){&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;312&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;UIkit.notify({&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;313&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;message : result,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;314&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;status &amp;nbsp;: &amp;#39;info&amp;#39;,&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;315&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;timeout : 0, &amp;nbsp; &amp;nbsp;// 常驻&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;316&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;pos &amp;nbsp; &amp;nbsp; : &amp;#39;top-right&amp;#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;317&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;318&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;319&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;});&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line-number&quot; value=&quot;320&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=&quot;line-content&quot;&gt;}, 1000);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;',`new_time`='1504357445',`keyword`='缓存',`hot_state`='0',`check_count`='28',`cid`='2',`admin_name`='admin' WHERE ( id=16 ) [ RunTime:0.0690s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000000s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000000s ]
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 51 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 74 行.
NOTIC: [8] Use of undefined constant id - assumed 'id' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant title - assumed 'title' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 77 行.
NOTIC: [8] Use of undefined constant desc - assumed 'desc' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 79 行.
NOTIC: [8] Use of undefined constant new_time - assumed 'new_time' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant admin_name - assumed 'admin_name' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant cid - assumed 'cid' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant mname - assumed 'mname' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 81 行.
NOTIC: [8] Use of undefined constant content - assumed 'content' D:\WAMP\wamp\www\test\bogle\Runtime\Cache\Home\590e9d3d1e6fd62ed8fa5111854ac312.php 第 84 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.017001s ]
INFO: [ view_parse ] --END-- [ RunTime:0.017001s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.001001s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.002000s ]
INFO: [ app_end ] --END-- [ RunTime:0.002000s ]

